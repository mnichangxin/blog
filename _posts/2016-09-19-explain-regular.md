---
layout: post
title: "深入浅出的正则表达式教程（更新中）"
categories: RegExp
tags: 正则 RegExp
---

> 引者注：本教程系翻译过来的，具体出处已不清。但深入浅出的讲解了正则最基础的语法功能，引者看来很好理解，便引过来。

# 1.引言

正则表达式（regular expression）描述了一种字符串匹配的模式，可以用来：含有符合某个

(1) 检查一个串中是否含有符合某个规则的字串，并且可以得到这个字串；

(2) 根据匹配规则对字符串进行灵活的替换操作。

正则表达式学习起来其实是很简单的，不多的几个较为抽象的概念也很容易理解。之所以很多人感觉正则表达式比较复杂，一方面是因为大多数文档没有做到由浅入深的讲解，概念上没有注意先后顺序，给对着的理解带来困难；另一方面，各种引擎自带的文档一般都要介绍它特有的功能，然而这部分特有的功能并不是我们首先要理解的。

# 2.正则表达式规则

## 2.1 普通字符

字母、数字、汉字、下划线、以及后边章节中没有特殊定义的标点符号，都是 `普通字符` 。表达式中的普通字符，在匹配一个字符串的时候，匹配与之相同的一个字符。

举例1：表达式 `c` ，在匹配字符串 `abcdef` 时，匹配结果是：成功；匹配到的内容是：`c` ；匹配到的位置是：开始于2，结束于3。（注：下标从0开始还是从1开始，因当前编程语言的不同而可能不同）。

举例2：表达式 `bcd` ，在匹配字符串 `abcde` 时，匹配结果是：成功；匹配到的内容是：`bcd` ；匹配到的位置是：开始于1，结束于4。

## 2.2 简单的转义字符

一些不便书写的字符，采用在前面加 `/` 的方法。这些字符其实我们都已经熟知了。

| 表达式 | 可匹配 |
|:------:|:-------|
| /r, /n | 代表回车和换行 |
| /t | 制表符 |
| // | 代表"/"本身 |

还有其他一些在后边章节中有特殊用处的标点符号，在前面加 `/` 后，就代表该符号本身。比如：`^`，`$` 都有特殊意义，如果想要皮诶字符串中的 `^` 和 `$` 字符，正则表达式就需要写成 `/^` 和 `/$` 。

| 表达式 | 可匹配 |
|:------:|:-------|
| /^ | 匹配^本身 |
| /$ | 匹配$符号本身 |
| /. | 匹配小数点(.)本身 |

这些转义字符的匹配方法与 `普通字符` 是类似的。也是匹配与之相同的一个字符。

举例：表达式 `/$d` ，在匹配字符串 `abc$de` 时，匹配结果是：成功；匹配到的内容是：`$d` ；匹配到的位置是：开始于3，结束于5.

## 2.3 能够与'多种字符' 匹配的表达式

正则表达式中的一些表示方法，可以匹配 `多种字符` 其中的任意一个字符。比如，表达式 `/d` 可以匹配任意一个数字。虽然可以匹配其中任意字符，但是只能是一个，不是多个。这就好比玩扑克牌的时候，大小王可以代替任意一张牌，但是中能代替一张牌。

| 表达式 | 可匹配 |
|:------:|:-------|
| /d | 任意一个数字，0~9中的任意一个 |
| /w | 任意一个字母或数字或下划线，也就是A~Z，a~z，0~9，_ 中的任意一个 |
| /s | 包括空格、制表符、换页符等空白字符的其中任意一个|
| . | 除了换行符（/n）之外的其他任意一个 |

举例1：表达式 `/d/d` ，在匹配 `abc123` 时，匹配结果是：成功；匹配到的内容是：`12` ；匹配到的位置是：开始于3，结束于5.

举例2：表达式 `a./d` ，在匹配 `aaa100` ，匹配结果是：成功；匹配到的内容是： `aa1` ；匹配到的位置是：开始于1，结束于4。

## 2.4 自定义能够匹配'多种字符'的表达式

使用方括号 `[]` 包含一系列字符，能够匹配其中任意一个字符。用 `[^]` 包含一系列字符，则能够匹配其中字符之外的任意一个字符。同样的道理，虽然可以匹配其中任意一个，但是只能是一个，不是多个。


| 表达式 | 可匹配 |
|:------:|:-------|
| [ab5@] | 匹配a或b或5或@ |
| [^abc] | 匹配除a，b，c之外的任意一个字符 |
| [f-k]  | 匹配f-k之间的任意一个字符|
| [^A-F0-3]| 匹配除A-F，0-3之外的任意一个字符 |

举例1：表达式 `[bcd][bcd]` 匹配 `abc123` 时，匹配的结果是：成功；匹配到的内容是：`bc` ；匹配到的位置是：开始于1，结束于3。

举例2：表达式 `[^abc]` 匹配 `abc123` 时，匹配的结果是：成功；匹配到的内容是：`1` ；匹配到的位置是：开始于3，结束于4。

## 2.5 修饰匹配次数的特殊符号

前面章节中讲到的表达式，无论是只能匹配一种字符的表达式，还是可以匹配多种字符的表达式，都只能匹配一次。如果使用表达式再加上修饰匹配次数的特殊符号，那么不用重复书写表达式就可以重复匹配。

使用方法是：“次数修饰”放在被修饰的表达式的后面。比如：`[bcd][bcd]` 可以写成 `[bcd]{2}` 。

| 表达式 | 可匹配 |
|:------:|:-------|
| {n} | 表达式重复n次，比如："/w{2}" 相当于 "/w/w"；"a{5}" 相当于 "aaaaa" |
| {m, n} | 表达式至少重复m次，最多重复n次，比如："ba{1,3}" 可以匹配 "ba" 或 "baa" 或 "baaa" |
| [f-k]  | 匹配f-k之间的任意一个字符|
| {m,}| 表达式至少重复m次，比如："/w/d{2,}" 可以匹配 "a12"，"_456"，"M12344" |
|  |  |